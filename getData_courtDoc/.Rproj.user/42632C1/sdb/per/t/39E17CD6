{
    "collab_server" : "",
    "contents" : "####################################\n# project name: Baiten_getData by RSelenium\n# author: hyx\n# date:2016.12.1-2016.12.3\n# key words: web scrapy js R  rvest RSelenium\n# version: v1.0.0\n# ####################################\n# Questions&next version:\n# ####Q1: R里的初始化  data_get <- data.frame() ？？\n# ####Q2: R里的多线程  R里不能做多线程，只有并行计算，只能用多进程代替，开多个RStudio\n# ####Q3：RSelenium包里navigate函数访问网页timeout 原代码获得？重写？chapter1\n# ####Q4: R里的断点、调试？\n# ####Q5: firefox(version 36?) browse how to do it? firefox version problem \n# ####并行计算机library(parallel)\n# ####源代码 remoteDriver.R errorHandler.R  queryRD =    \n# ####引入tryCatch()\n# ####remoteDriver\n######################################\n\n\n\n###rm(list=ls())\n###ctrl+shift+c段落注释\n\n\nlibrary(httr)\nlibrary(rvest)\nlibrary(RSelenium)\n\n#读取第二次以后的所有页面及分页\nopenHtml <- function(url)\n  \n{\n  data_get <- data.frame()\n  remDr$navigate(url)\n  # firmname <- name[x]\n  # remDr$navigate(site[x])\n  #totalCount\n  #class(totalCount)\n  # webElem_totalcount <- remDr$findElements(using = 'css selector', \"#sop-totalCount\")\n  # totalCount <- unlist(lapply(webElem_totalcount, function(x){x$getElementText()}))\n  \n  #  webElem_title <- remDr$findElements(using = 'css selector', \"div:nth-child(1) > a:nth-child(3)\")\n  #title <- unlist(lapply(webElem_title, function(x){x$getElementText()}))\n  \n  # webElem_URR <- remDr$\n  webElems_title <- remDr$findElements(using = 'css selector', \"div.wstitle\")\n  resHeaders <- unlist(lapply(webElems_title, function(x){x$getElementText()}))\n  #doc_url <- unlist(lapply(webElems, function(x){x$getElementAttribute(\"href\")}))\n  print(resHeaders)\n  #webElems <- remDr$findElements(value = \"//tbody//tr//td//div//a\")  \n  webElems_url <- remDr$findElements(using = 'css selector', \"td:nth-child(1) > div:nth-child(1) > a:nth-child(3)\")\n  doc_url <- unlist(lapply(webElems_url, function(x){x$getElementAttribute(\"href\")}))\n  print(doc_url)\n  remDr$navigate(doc_url[1])\n  webElems_no <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'（201')]\")\n  doc_no <- unlist(lapply(webElems_no, function(x){x$getElementText()}))\n  print(doc_no)\n  return (data_get)\n  \n  \n}\n\n\n\n\n\nsite <- \"http://wenshu.court.gov.cn/content/content?DocID=2c3a31eb-2bc1-407d-a969-ca65e945b342\"\nremDr <- remoteDriver(remoteServerAddr = \"localhost\" \n                      , port = 4444\n                      , browserName = \"chrome\"\n)\nremDr$open()\n#tryCatch(remDr$navigate(site))\nremDr$navigate(site)\ndata_get <- data.frame()\n##审判长 审判员 代理审判员  书记员 书记员（兼） 人民陪审员 代理书记员\nwebElems_no <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'（201')]\")\nno <- unlist(lapply(webElems_no, function(x){x$getElementText()}))\n# webElems_SPZ <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'审　判　长')]\")\n# SPZ <- unlist(lapply(webElems_SPZ, function(x){x$getElementText()}))\n# webElems_SPY <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'审　判　员')]\")\n# SPY <- unlist(lapply(webElems_SPY, function(x){x$getElementText()}))\nwebElems_DLSPY <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'代理审判员')]\")\nDLSPY <- unlist(lapply(webElems_DLSPY, function(x){x$getElementText()}))\nwebElems_SJY <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'书　记　员')]\")\nSJY <- unlist(lapply(webElems_SJY, function(x){x$getElementText()}))\nwebElems_RMPSY <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'书　记　员')]\")\nRMPSY <- unlist(lapply(webElems_RMPSY, function(x){x$getElementText()}))\nwebElems_DLSJY <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'代理书记员')]\")\nDLSJY <- unlist(lapply(webElems_DLSJY, function(x){x$getElementText()}))\nwebElems_SJYJ <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'书记员（兼')]\")\nSJYJ <- unlist(lapply(webElems_SJYJ, function(x){x$getElementText()}))\n# \n# webElems_S_P_Z <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'审    判　  长')]\")\n# S_P_Z <- unlist(lapply(webElems_S_P_Z, function(x){x$getElementText()}))\n# webElems_S_P_Y <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'审  　判  　员')]\")\n# S_P_Y <- unlist(lapply(webElems_S_P_Y, function(x){x$getElementText()}))\n\nwebElems_S_P <- remDr$findElements(using = 'xpath',\"//*[starts-with(text(),'审　')]\")\nS_P <- unlist(lapply(webElems_S_P, function(x){x$getElementText()}))\n#\n\nDLSPY<-paste(DLSPY,collapse = \" \")\n# SPZ<-paste(SPZ,collapse = \" \")\n# SPY<-paste(SPY,collapse = \" \")\nS_P <-paste(S_P,collapse = \" \")\nSJY<-paste(SJY,collapse = \" \")\nRMPSY<-paste(RMPSY,collapse = \" \")\nSJYJ<-paste(SJYJ,collapse = \" \")\nDLSJY<-paste(DLSJY,collapse = \" \")\n# S_P_Z<-paste(S_P_Z,collapse = \" \")\n# D_P_Y<-paste(D_P_Y,collapse = \" \")\n# if(is.null(SPY))\n# {\n#   SPY <- NA\n# }\n# if(is.null(SPZ))\n# {\n#   SPZ <- NA\n# }\n# if(is.null(DLSPY))\n# {\n#   DLSPY <- NA\n# }\n# if(is.null(SJY))\n# {\n#   SJY <- NA\n# }\n# if(is.null(RMPSY))\n# {\n#   RMSPY <- NA\n# }\n# if(is.null(DLSJY))\n# {\n#   DLSJY <- NA\n# }\n# if(is.null(SJYJ))\n# {\n#   SJYJ <- NA\n# }\nSPZ\nSPY\nDLSPY\nSJY\nRMPSY\nDLSJY\nSJYJ\n\n\n#data_get  <- data.frame(SPZ,SPY,DLSPY,SJY,RMPSY,DLSJY,SJYJ)\ndata_get  <- data.frame(S_P,DLSPY,SJY,RMPSY,DLSJY,SJYJ)\n\ndata_get\nView(data_get)\n",
    "created" : 1481253512667.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2406064996",
    "id" : "39E17CD6",
    "lastKnownWriteTime" : 1481275352,
    "last_content_update" : 1481275352784,
    "path" : "~/R codes/getData_courtDoc/get_Name.R",
    "project_path" : "get_Name.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}